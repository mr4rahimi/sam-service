---
type FeatureKey = "warranty" | "parts" | "speed" | "price";

const features: {
  key: FeatureKey;
  title: string;
  desc: string;
}[] = [
  { key: "warranty", title: "گارانتی تعمیرات", desc: "تحویل دستگاه همراه با گارانتی کتبی معتبر." },
  { key: "parts", title: "قطعات اورجینال", desc: "استفاده از قطعات اصلی و باکیفیت." },
  { key: "speed", title: "سریع ترین زمان", desc: "اولویت بندی تعمیرات و زمان بندی شفاف." },
  { key: "price", title: "مناسب ترین قیمت", desc: "قیمت گذاری منصفانه و اعلام هزینه قبل از تعمیر." },
];

function getIcon(key: FeatureKey): string {
  switch (key) {
    case "warranty":
      return `<svg viewBox="0 0 24 24" fill="none" aria-hidden="true">
        <path d="M12 2l7 4v6c0 5-3 9-7 10-4-1-7-5-7-10V6l7-4z" stroke="currentColor" stroke-width="1.8" stroke-linejoin="round"/>
        <path d="M8.7 12.2l2.2 2.3 4.6-5" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>`;
    case "parts":
      return `<svg viewBox="0 0 24 24" fill="none" aria-hidden="true">
        <path d="M14 7a4 4 0 10-4 4" stroke="currentColor" stroke-width="1.8" stroke-linecap="round"/>
        <path d="M12 14l-3 3a3 3 0 104 4l3-3" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"/>
        <path d="M10 10l4 4" stroke="currentColor" stroke-width="1.8" stroke-linecap="round"/>
      </svg>`;
    case "speed":
      return `<svg viewBox="0 0 24 24" fill="none" aria-hidden="true">
        <path d="M12 4a8 8 0 108 8" stroke="currentColor" stroke-width="1.8" stroke-linecap="round"/>
        <path d="M12 12l4-2" stroke="currentColor" stroke-width="1.8" stroke-linecap="round"/>
        <path d="M19 5l-2.5 2.5" stroke="currentColor" stroke-width="1.8" stroke-linecap="round"/>
      </svg>`;
    case "price":
    default:
      return `<svg viewBox="0 0 24 24" fill="none" aria-hidden="true">
        <path d="M20 12V7a2 2 0 00-2-2h-5L4 14l6 6 10-8z" stroke="currentColor" stroke-width="1.8" stroke-linejoin="round"/>
        <path d="M14.5 9.5h.01" stroke="currentColor" stroke-width="3" stroke-linecap="round"/>
      </svg>`;
  }
}
---

<section class="features mt-10">
  <div class="features-head">
    <h2 class="features-title">چرا ما؟</h2>
    <p class="features-sub">مزیت های کلیدی نمایندگی تعمیرات سامسونگ</p>
  </div>

  <div class="features-grid">
    {features.map((f) => (
      <article class="feat-card led-ring" aria-label={f.title}>
        <div class="feat-bg" aria-hidden="true"></div>

        <div class="feat-top">
          <div class="feat-ico" set:html={getIcon(f.key)} />
          <div class="feat-text">
            <div class="feat-name">{f.title}</div>
            <p class="feat-desc">{f.desc}</p>
          </div>
        </div>

        <div class="feat-bottom" aria-hidden="true">
          <span class="feat-chip">Premium Service</span>
          <span class="feat-dot"></span>
        </div>
      </article>
    ))}
  </div>
</section>

<style>
  .features {
    position: relative;
  }

  .features-head {
    display: flex;
    align-items: end;
    justify-content: space-between;
    gap: 12px;
  }

  .features-title {
    font-size: 1.25rem;
    font-weight: 900;
  }

  .features-sub {
    font-size: 0.9rem;
    color: rgba(226, 232, 240, 0.78);
  }

  .features-grid {
    margin-top: 18px;
    display: grid;
    gap: 14px;
    grid-template-columns: 1fr;
  }

  @media (min-width: 640px) {
    .features-grid {
      grid-template-columns: repeat(2, minmax(0, 1fr));
    }
  }

  @media (min-width: 1024px) {
    .features-grid {
      grid-template-columns: repeat(4, minmax(0, 1fr));
      gap: 16px;
    }
  }

  /* ---------- Card ---------- */
  .feat-card {
    position: relative;
    border-radius: 26px;
    padding: 18px;
    overflow: hidden;

    border: 1px solid rgba(255, 255, 255, 0.10);
    background: rgba(255, 255, 255, 0.04);
    box-shadow:
      0 18px 55px rgba(0, 0, 0, 0.42),
      inset 0 1px 0 rgba(255, 255, 255, 0.14);

    transform: translateZ(0);
    transition: transform 260ms ease, box-shadow 260ms ease, background-color 260ms ease;
  }

  .feat-bg {
    position: absolute;
    inset: -35%;
    background:
      radial-gradient(circle at 20% 15%, rgba(0, 200, 255, 0.16), transparent 45%),
      radial-gradient(circle at 85% 10%, rgba(0, 180, 255, 0.12), transparent 45%),
      radial-gradient(circle at 70% 85%, rgba(255, 140, 220, 0.10), transparent 55%);
    filter: blur(16px);
    opacity: 0.75;
    pointer-events: none;
  }

  .feat-top {
    position: relative;
    display: flex;
    gap: 12px;
    align-items: flex-start;
    z-index: 1;
  }

  .feat-ico {
    width: 44px;
    height: 44px;
    border-radius: 18px;
    display: grid;
    place-items: center;
    color: rgba(56, 189, 248, 0.95);

    border: 1px solid rgba(255,255,255,0.14);
    background: rgba(255,255,255,0.04);
    box-shadow:
      0 16px 40px rgba(0,0,0,0.35),
      inset 0 1px 0 rgba(255,255,255,0.14);
  }

  .feat-ico :global(svg) {
    width: 22px;
    height: 22px;
  }

  .feat-text {
    min-width: 0;
    flex: 1;
  }

  .feat-name {
    font-size: 1rem;
    font-weight: 900;
    color: rgba(241, 245, 249, 0.96);
  }

  .feat-desc {
    margin-top: 6px;
    font-size: 0.9rem;
    line-height: 1.7;
    color: rgba(226, 232, 240, 0.78);
  }

  .feat-bottom {
    position: relative;
    z-index: 1;
    margin-top: 14px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    opacity: 0.9;
  }

  .feat-chip {
    font-size: 0.72rem;
    letter-spacing: 0.04em;
    padding: 7px 10px;
    border-radius: 999px;
    border: 1px solid rgba(255,255,255,0.12);
    background: rgba(255,255,255,0.03);
    color: rgba(203, 213, 225, 0.9);
  }

  .feat-dot {
    width: 8px;
    height: 8px;
    border-radius: 999px;
    background: rgba(56, 189, 248, 0.9);
    box-shadow: 0 0 18px rgba(0, 210, 255, 0.55);
  }

  @media (hover: hover) and (pointer: fine) {
    .feat-card:hover {
      transform: translateY(-3px);
      background: rgba(255, 255, 255, 0.055);
      box-shadow:
        0 24px 70px rgba(0, 0, 0, 0.52),
        inset 0 1px 0 rgba(255, 255, 255, 0.16);
    }
  }

  /* ---------- LED Ring (thin & moving) ---------- */
  .led-ring {
    position: relative;
  }

  .led-ring::before {
    content: "";
    position: absolute;
    inset: 0;
    border-radius: inherit;
    padding: 2px;
    pointer-events: none;

    background:
      conic-gradient(
        from var(--a),
        rgba(0, 200, 255, 0.00) 0deg,
        rgba(0, 200, 255, 0.00) 292deg,
        rgba(0, 220, 255, 0.55) 314deg,
        rgba(0, 245, 255, 1.00) 330deg,
        rgba(0, 220, 255, 0.55) 346deg,
        rgba(0, 200, 255, 0.00) 360deg
      ),
      conic-gradient(
        from 0deg,
        rgba(0, 190, 255, 0.10),
        rgba(0, 220, 255, 0.14),
        rgba(0, 190, 255, 0.10)
      );

    -webkit-mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
    -webkit-mask-composite: xor;
            mask-composite: exclude;

    mix-blend-mode: screen;
    filter: saturate(1.35);
    animation: led-rotate 5.2s linear infinite;
    opacity: 0.95;
  }

  .led-ring::after {
    content: "";
    position: absolute;
    inset: -30%;
    pointer-events: none;

    background:
      conic-gradient(
        from var(--a),
        rgba(0, 210, 255, 0.00) 0deg,
        rgba(0, 210, 255, 0.00) 306deg,
        rgba(0, 235, 255, 0.34) 326deg,
        rgba(0, 255, 255, 0.62) 340deg,
        rgba(0, 235, 255, 0.34) 354deg,
        rgba(0, 210, 255, 0.00) 360deg
      );

    filter: blur(16px) saturate(1.35);
    mix-blend-mode: screen;
    opacity: 0.65;
    animation: led-rotate 5.2s linear infinite;
  }

  @property --a {
    syntax: "<angle>";
    inherits: false;
    initial-value: 0deg;
  }

  @keyframes led-rotate {
    to { --a: 360deg; }
  }

  @media (prefers-reduced-motion: reduce) {
    .led-ring::before,
    .led-ring::after {
      animation: none;
    }
  }
</style>
